CREATE VIEW trackView AS 
SELECT id, album_id, title, track_number,
  duration/60 AS m, duration % 60 AS s FROM track; 
  
/*--------------test with join */

SELECT a.title AS album, a.artist, t.track_number AS seq, t.title, t.m, t.s
  FROM album AS a
  JOIN trackView AS t
    ON t.album_id = a.id
  ORDER BY a.title, t.track_number
;

DROP VIEW IF EXISTS trackView;

/*---------------*/

SELECT a.artist AS artist,
    a.title AS album,
    t.title AS track,
    t.track_number AS trackno,
    t.duration / 60 AS m,
    t.duration % 60 AS s
  FROM track AS t
    JOIN album AS a
      ON a.id = t.album_id
;


/*-----------*/
CREATE VIEW joinedAlbum AS
  SELECT a.artist AS artist,
      a.title AS album,
      t.title AS track,
      t.track_number AS trackno,
      t.duration / 60 AS m,
      t.duration % 60 AS s
    FROM track AS t
    JOIN album AS a
      ON a.id = t.album_id
;

SELECT artist, album, track, trackno,
m || ':' || substr('00' || s, -2, 2) AS duration

FROM joinedAlbum;

DROP VIEW IF EXISTS joinedAlbum;